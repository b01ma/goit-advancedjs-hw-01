{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["export default function renderForm(formEl) {\n  console.log('FORM INIT');\n\n  const FEEDBACK_KEY = 'feedback-form-state';\n  const formData = { email: '', message: '' };\n\n  if (formEl) {\n    // Restore previous data (if any)\n    restoreState();\n\n    // Input delegation (single listener for all fields)\n    formEl.addEventListener('input', onInput, { passive: true });\n    formEl.addEventListener('submit', onSubmit);\n  }\n\n  function onInput(e) {\n    const { name, value } = e.target;\n    if (!(name in formData)) return; // ignore unrelated fields\n    formData[name] = value.trimStart(); // preserve trailing typing, trim only leading while editing\n    persist();\n  }\n\n  function onSubmit(e) {\n    e.preventDefault();\n\n    formData.email = formData.email.trim();\n    formData.message = formData.message.trim();\n\n    if (!formData.email || !formData.message) {\n      alert('Fill please all fields');\n      return;\n    }\n\n    console.log('Submitted form data:', { ...formData });\n\n    localStorage.removeItem(FEEDBACK_KEY);\n    formData.email = '';\n    formData.message = '';\n    formEl.reset();\n  }\n\n  function persist() {\n    try {\n      localStorage.setItem(FEEDBACK_KEY, JSON.stringify(formData));\n    } catch (err) {\n      console.log('Failed to persist form state:', err);\n    }\n  }\n\n  function restoreState() {\n    try {\n      const raw = localStorage.getItem(FEEDBACK_KEY);\n      if (!raw) return;\n\n      const saved = JSON.parse(raw);\n      if (typeof saved === 'object') {\n        if (typeof saved.email === 'string') formData.email = saved.email;\n        if (typeof saved.message === 'string') formData.message = saved.message;\n\n        if (formEl.elements.email) formEl.elements.email.value = formData.email;\n        if (formEl.elements.message) formEl.elements.message.value = formData.message;\n      }\n    } catch (err) {\n      console.warn('Failed to restore form state:', err);\n    }\n  }\n}\n\nrenderForm(document.querySelector('.feedback-form'));\n"],"names":["renderForm","formEl","FEEDBACK_KEY","formData","restoreState","onInput","onSubmit","e","name","value","persist","err","raw","saved"],"mappings":"uFAAe,SAASA,EAAWC,EAAQ,CACzC,QAAQ,IAAI,WAAW,EAEvB,MAAMC,EAAe,sBACfC,EAAW,CAAE,MAAO,GAAI,QAAS,EAAE,EAErCF,IAEFG,IAGAH,EAAO,iBAAiB,QAASI,EAAS,CAAE,QAAS,EAAI,CAAE,EAC3DJ,EAAO,iBAAiB,SAAUK,CAAQ,GAG5C,SAASD,EAAQE,EAAG,CAClB,KAAM,CAAE,KAAAC,EAAM,MAAAC,GAAUF,EAAE,OACpBC,KAAQL,IACdA,EAASK,CAAI,EAAIC,EAAM,UAAS,EAChCC,IACD,CAED,SAASJ,EAASC,EAAG,CAMnB,GALAA,EAAE,eAAc,EAEhBJ,EAAS,MAAQA,EAAS,MAAM,KAAI,EACpCA,EAAS,QAAUA,EAAS,QAAQ,KAAI,EAEpC,CAACA,EAAS,OAAS,CAACA,EAAS,QAAS,CACxC,MAAM,wBAAwB,EAC9B,MACD,CAED,QAAQ,IAAI,uBAAwB,CAAE,GAAGA,CAAU,CAAA,EAEnD,aAAa,WAAWD,CAAY,EACpCC,EAAS,MAAQ,GACjBA,EAAS,QAAU,GACnBF,EAAO,MAAK,CACb,CAED,SAASS,GAAU,CACjB,GAAI,CACF,aAAa,QAAQR,EAAc,KAAK,UAAUC,CAAQ,CAAC,CAC5D,OAAQQ,EAAK,CACZ,QAAQ,IAAI,gCAAiCA,CAAG,CACjD,CACF,CAED,SAASP,GAAe,CACtB,GAAI,CACF,MAAMQ,EAAM,aAAa,QAAQV,CAAY,EAC7C,GAAI,CAACU,EAAK,OAEV,MAAMC,EAAQ,KAAK,MAAMD,CAAG,EACxB,OAAOC,GAAU,WACf,OAAOA,EAAM,OAAU,WAAUV,EAAS,MAAQU,EAAM,OACxD,OAAOA,EAAM,SAAY,WAAUV,EAAS,QAAUU,EAAM,SAE5DZ,EAAO,SAAS,QAAOA,EAAO,SAAS,MAAM,MAAQE,EAAS,OAC9DF,EAAO,SAAS,UAASA,EAAO,SAAS,QAAQ,MAAQE,EAAS,SAEzE,OAAQQ,EAAK,CACZ,QAAQ,KAAK,gCAAiCA,CAAG,CAClD,CACF,CACH,CAEAX,EAAW,SAAS,cAAc,gBAAgB,CAAC"}